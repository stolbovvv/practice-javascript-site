"use strict";window.addEventListener("DOMContentLoaded",(()=>{const tabsTriggerWrapper=document.querySelector(".tabheader__items"),tabsTriggerItems=document.querySelectorAll(".tabheader__item"),tabsContentItems=document.querySelectorAll(".tabcontent");function hideTabContent(){tabsContentItems.forEach((item=>{item.classList.add("hide"),item.classList.remove("show","fade")})),tabsTriggerItems.forEach((item=>{item.classList.remove("tabheader__item_active")}))}function showTabContent(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;tabsContentItems[i].classList.add("show","fade"),tabsContentItems[i].classList.remove("hide"),tabsTriggerItems[i].classList.add("tabheader__item_active")}hideTabContent(),showTabContent(),tabsTriggerWrapper.addEventListener("click",(e=>{e.target&&e.target.matches(".tabheader__item")&&tabsTriggerItems.forEach(((item,index)=>{e.target===item&&(hideTabContent(),showTabContent(index))}))}));!function setClock(selector,endtime){const timer=document.querySelector(selector),days=timer.querySelector("#days"),hours=timer.querySelector("#hours"),minutes=timer.querySelector("#minutes"),seconds=timer.querySelector("#seconds");let timeInterval;function correctTimeTtem(time){return time<10?`0${time}`:time}function updateClock(){const timeData=function getTimeRemaning(endtime){const timeDifference=new Date(endtime)-new Date;return{days:Math.floor(timeDifference/1e3/60/60/24),hours:Math.floor(timeDifference/1e3/60/60%24),minutes:Math.floor(timeDifference/1e3/60%60),seconds:Math.floor(timeDifference/1e3%60),timeDifference:timeDifference}}(endtime);days.textContent=correctTimeTtem(timeData.days),hours.textContent=correctTimeTtem(timeData.hours),minutes.textContent=correctTimeTtem(timeData.minutes),seconds.textContent=correctTimeTtem(timeData.seconds),timeData.timeDifference<=0&&(clearInterval(timeInterval),days.textContent="0",hours.textContent="00",minutes.textContent="00",seconds.textContent="00")}updateClock(),timeInterval=setInterval(updateClock,1e3)}(".timer","2023-09-01T00:00:00");const modal=document.querySelector(".modal");let modalTimerId;function showModal(){modal.classList.add("show","fade"),modal.classList.remove("hide"),document.body.style.overflow="hidden",clearTimeout(modalTimerId)}function showThanksModal(text){const prevModalDialog=document.querySelector(".modal__dialog"),thanksModal=document.createElement("div");prevModalDialog.classList.add("hide"),showModal(),thanksModal.classList.add("modal__dialog"),thanksModal.innerHTML=`\n      <div class="modal__content">\n        <div class="modal__close" data-hide-modal="modal">&times;</div>\n        <div class="modal__title">${text}</div>\n      </div>\n    `,document.querySelector(".modal").append(thanksModal),setTimeout((()=>{thanksModal.remove(),prevModalDialog.classList.add("show"),prevModalDialog.classList.remove("hide"),hideModal()}),4e3)}function hideModal(){modal.classList.add("hide"),modal.classList.remove("show","fade"),document.body.style.overflow=""}document.querySelectorAll("[data-show-modal]").forEach((trigger=>{trigger.addEventListener("click",showModal)})),modal.addEventListener("click",(e=>{e.target&&e.target===modal&&hideModal(),e.target&&e.target.matches("[data-hide-modal]")&&hideModal()})),document.addEventListener("keydown",(e=>{"Escape"===e.code&&modal.classList.contains("show")&&hideModal()})),window.addEventListener("scroll",(function showModalByScroll(){window.scrollY+document.documentElement.clientHeight>=document.documentElement.scrollHeight&&(showModal(),window.removeEventListener("scroll",showModalByScroll))})),modalTimerId=setTimeout(showModal,6e4);class MenuCard{constructor(_ref){let{src:src,alt:alt,title:title,descr:descr,price:price,parentSelector:parentSelector,classes:classes=[]}=_ref;this.src=src,this.alt=alt,this.title=title,this.descr=descr,this.price=price,this.parent=document.querySelector(parentSelector),this.element=document.createElement("div"),this.classes=classes,this.transfer=95,this.converToRUB()}converToRUB(){this.price=this.price*this.transfer}render(){this.element.classList.add("menu__item"),this.classes.forEach((className=>this.element.classList.add(className))),this.element.innerHTML=`\n        <img src="${this.src}" alt="${this.alt}" />\n        <h3 class="menu__item-subtitle">${this.title}</h3>\n        <div class="menu__item-descr">${this.descr}</div>\n        <div class="menu__item-divider"></div>\n        <div class="menu__item-price">\n          <div class="menu__item-cost">Цена:</div>\n          <div class="menu__item-total"><span>${this.price}</span> руб/день</div>\n        </div>\n      `,this.parent.append(this.element)}}(async url=>{const res=await fetch(url,{});if(!res.ok)throw new Error(`Could not fetch ${url}, status: ${res.status}`);return await res.json()})("http://localhost:3000/menu").then((data=>{data.forEach((item=>{new MenuCard({...item,parentSelector:".menu .container"}).render()}))}));const forms=document.querySelectorAll("form"),messages_loading="./icons/spinner.svg",messages_succses="Спаибо! Скоро мы с вами свяжемся",messages_failure="Что-то пошло не так...";function bindPostData(form){form.addEventListener("submit",(e=>{e.preventDefault();const statusMessage=document.createElement("img"),jsonData=Object.fromEntries(new FormData(form).entries());statusMessage.src=messages_loading,statusMessage.style.display="block",statusMessage.style.margin="10px auto -28px auto",form.insertAdjacentElement("afterend",statusMessage),(async(url,data)=>{const res=await fetch(url,{method:"POST",headers:{"Content-type":"application/json"},body:data});return await res.json()})("http://localhost:3000/requests",JSON.stringify(jsonData)).then((()=>showThanksModal(messages_succses))).catch((()=>showThanksModal(messages_failure))).finally((()=>{statusMessage.remove(),form.reset()}))}))}forms.forEach((form=>bindPostData(form)));new class Slider{constructor(element){let{wrapper:wrapper=".slider__wrapper",slides:slides=".slider__slide",track:track=".slider__track",prev:prev=".sldier__button-prev",next:next=".slider__button-next",total:total=".slider__total",current:current=".slider__current",paginationClass:paginationClass="slider__pagination",paginationDotClass:paginationDotClass="slider__pagination-dot"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.slider="string"==typeof element?document.querySelector(element):element,this.slider&&(this.wrapper="string"==typeof wrapper?this.slider.querySelector(wrapper):wrapper,this.slides="string"==typeof slides?this.slider.querySelectorAll(slides):slides,this.track="string"==typeof track?this.slider.querySelector(track):track,this.prev="string"==typeof prev?this.slider.querySelector(prev):prev,this.next="string"==typeof next?this.slider.querySelector(next):next,this.dots=[],this.pagination=null,this.total="string"==typeof prev?this.slider.querySelector(total):total,this.current="string"==typeof next?this.slider.querySelector(current):current,this.paginationClass=paginationClass,this.paginationDotClass=paginationDotClass,this.slideIndex=0,this.trackOffset=0,this.wrapperWidth=this.wrapper.offsetWidth,this.init(),this.createPagination=this.createPagination.bind(this))}setInitailStyles(){this.slider.style.position="relative",this.wrapper.style.overflow="hidden",this.track.style.width=this.wrapperWidth*this.slides.length+"px",this.track.style.display="flex",this.track.style.transition="all 0.5s ease 0s",this.slides.forEach((slide=>{slide.style.width=`${this.wrapperWidth}px`}))}setInitialInfo(){this.total.innerText=(this.slides.length<10?"0":"")+this.slides.length,this.current.innerText=(this.slides.length<10?"0":"")+(this.slideIndex+1)}createPagination(){this.pagination=document.createElement("ol"),this.pagination.classList.add(this.paginationClass);for(let i=0;i<this.slides.length;i++){const dot=document.createElement("li");dot.classList.add(this.paginationDotClass),dot.dataset.slideTo=i,0===i&&(dot.style.opacity=1),this.pagination.append(dot),this.dots.push(dot)}this.slider.append(this.pagination)}changeDot(index){this.dots.forEach(((dot,i)=>{dot.style.opacity=i===index?1:.5}))}changeInfo(index){this.current.innerText=(this.slides.length<10?"0":"")+(index+1)}changeSlide(index){this.track.style.transform=`translateX(-${this.wrapperWidth*index}px)`}init(){this.setInitailStyles(),this.setInitialInfo(),this.createPagination(),this.next.addEventListener("click",(()=>{this.slideIndex===this.slides.length-1?this.slideIndex=0:this.slideIndex+=1,this.changeDot(this.slideIndex),this.changeInfo(this.slideIndex),this.changeSlide(this.slideIndex)})),this.prev.addEventListener("click",(()=>{0===this.slideIndex?this.slideIndex=this.slides.length-1:this.slideIndex-=1,this.changeDot(this.slideIndex),this.changeInfo(this.slideIndex),this.changeSlide(this.slideIndex)})),this.dots.forEach(((dot,index)=>{dot.addEventListener("click",(()=>{this.slideIndex=index,this.changeDot(this.slideIndex),this.changeInfo(this.slideIndex),this.changeSlide(this.slideIndex)}))}))}}(".offer__slider",{wrapper:".offer__slider-wrapper",slides:".offer__slide",track:".offer__slider-inner",prev:".offer__slider-prev",next:".offer__slider-next",total:"#total",current:"#current",paginationClass:"carousel-indicators",paginationDotClass:"dot"})}));
//# sourceMappingURL=index.min.js.map