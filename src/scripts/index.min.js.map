{"version":3,"sources":["index.js"],"names":["window","addEventListener","tabsTriggerWrapper","document","querySelector","tabsTriggerItems","querySelectorAll","tabsContentItems","hideTabContent","forEach","item","classList","add","remove","showTabContent","i","arguments","length","undefined","e","target","matches","index","setClock","selector","endtime","timer","days","hours","minutes","seconds","timeInterval","correctTimeTtem","time","updateClock","timeData","getTimeRemaning","timeDifference","Date","Math","floor","textContent","clearInterval","setInterval","modal","modalTimerId","showModal","body","style","overflow","clearTimeout","showThanksModal","text","prevModalDialog","thanksModal","createElement","innerHTML","append","setTimeout","hideModal","trigger","code","contains","showModalByScroll","scrollY","documentElement","clientHeight","scrollHeight","removeEventListener","MenuCard","constructor","_ref","src","alt","title","descr","price","parentSelector","classes","this","parent","element","transfer","converToRUB","render","className","forms","messages","form","postData","preventDefault","statusMessage","jsonData","formData","FormData","request","XMLHttpRequest","display","margin","insertAdjacentElement","open","setRequestHeader","value","key","send","JSON","stringify","status","console","log","response","reset"],"mappings":"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","file":"index.min.js","sourcesContent":["/* Global */\r\n\r\nwindow.addEventListener('DOMContentLoaded', () => {\r\n  // TABS\r\n  const tabsTriggerWrapper = document.querySelector('.tabheader__items');\r\n  const tabsTriggerItems = document.querySelectorAll('.tabheader__item');\r\n  const tabsContentItems = document.querySelectorAll('.tabcontent');\r\n\r\n  function hideTabContent() {\r\n    tabsContentItems.forEach((item) => {\r\n      item.classList.add('hide');\r\n      item.classList.remove('show', 'fade');\r\n    });\r\n\r\n    tabsTriggerItems.forEach((item) => {\r\n      item.classList.remove('tabheader__item_active');\r\n    });\r\n  }\r\n\r\n  function showTabContent(i = 0) {\r\n    tabsContentItems[i].classList.add('show', 'fade');\r\n    tabsContentItems[i].classList.remove('hide');\r\n    tabsTriggerItems[i].classList.add('tabheader__item_active');\r\n  }\r\n\r\n  hideTabContent();\r\n  showTabContent();\r\n\r\n  tabsTriggerWrapper.addEventListener('click', (e) => {\r\n    if (e.target && e.target.matches('.tabheader__item')) {\r\n      tabsTriggerItems.forEach((item, index) => {\r\n        if (e.target === item) {\r\n          hideTabContent();\r\n          showTabContent(index);\r\n        }\r\n      });\r\n    }\r\n  });\r\n\r\n  // TIMER\r\n  const deadline = '2023-09-01T00:00:00';\r\n\r\n  function getTimeRemaning(endtime) {\r\n    const timeDifference = new Date(endtime) - new Date();\r\n    const days = Math.floor(timeDifference / 1000 / 60 / 60 / 24);\r\n    const hours = Math.floor((timeDifference / 1000 / 60 / 60) % 24);\r\n    const minutes = Math.floor((timeDifference / 1000 / 60) % 60);\r\n    const seconds = Math.floor((timeDifference / 1000) % 60);\r\n\r\n    return { days, hours, minutes, seconds, timeDifference };\r\n  }\r\n\r\n  function setClock(selector, endtime) {\r\n    const timer = document.querySelector(selector);\r\n    const days = timer.querySelector('#days');\r\n    const hours = timer.querySelector('#hours');\r\n    const minutes = timer.querySelector('#minutes');\r\n    const seconds = timer.querySelector('#seconds');\r\n\r\n    let timeInterval;\r\n\r\n    function correctTimeTtem(time) {\r\n      if (time < 10) return `0${time}`;\r\n\r\n      return time;\r\n    }\r\n\r\n    function updateClock() {\r\n      const timeData = getTimeRemaning(endtime);\r\n\r\n      days.textContent = correctTimeTtem(timeData.days);\r\n      hours.textContent = correctTimeTtem(timeData.hours);\r\n      minutes.textContent = correctTimeTtem(timeData.minutes);\r\n      seconds.textContent = correctTimeTtem(timeData.seconds);\r\n\r\n      if (timeData.timeDifference <= 0) {\r\n        clearInterval(timeInterval);\r\n\r\n        days.textContent = '0';\r\n        hours.textContent = '00';\r\n        minutes.textContent = '00';\r\n        seconds.textContent = '00';\r\n      }\r\n    }\r\n\r\n    updateClock();\r\n\r\n    timeInterval = setInterval(updateClock, 1000);\r\n  }\r\n\r\n  setClock('.timer', deadline);\r\n\r\n  // MODAL\r\n  const modal = document.querySelector('.modal');\r\n  const modalTriggerShow = document.querySelectorAll('[data-show-modal]');\r\n\r\n  let modalTimerId;\r\n\r\n  function showModal() {\r\n    modal.classList.add('show', 'fade');\r\n    modal.classList.remove('hide');\r\n    document.body.style.overflow = 'hidden';\r\n\r\n    clearTimeout(modalTimerId);\r\n  }\r\n\r\n  function showModalByScroll() {\r\n    if (window.scrollY + document.documentElement.clientHeight >= document.documentElement.scrollHeight) {\r\n      showModal();\r\n      window.removeEventListener('scroll', showModalByScroll);\r\n    }\r\n  }\r\n\r\n  function showThanksModal(text) {\r\n    const prevModalDialog = document.querySelector('.modal__dialog');\r\n    const thanksModal = document.createElement('div');\r\n\r\n    prevModalDialog.classList.add('hide');\r\n\r\n    showModal();\r\n\r\n    thanksModal.classList.add('modal__dialog');\r\n    thanksModal.innerHTML = `\r\n      <div class=\"modal__content\">\r\n        <div class=\"modal__close\" data-hide-modal=\"modal\">&times;</div>\r\n        <div class=\"modal__title\">${text}</div>\r\n      </div>\r\n    `;\r\n\r\n    document.querySelector('.modal').append(thanksModal);\r\n\r\n    setTimeout(() => {\r\n      thanksModal.remove();\r\n      prevModalDialog.classList.add('show');\r\n      prevModalDialog.classList.remove('hide');\r\n      hideModal();\r\n    }, 4000);\r\n  }\r\n\r\n  function hideModal() {\r\n    modal.classList.add('hide');\r\n    modal.classList.remove('show', 'fade');\r\n    document.body.style.overflow = '';\r\n  }\r\n\r\n  modalTriggerShow.forEach((trigger) => {\r\n    trigger.addEventListener('click', showModal);\r\n  });\r\n\r\n  modal.addEventListener('click', (e) => {\r\n    if (e.target && e.target === modal) hideModal();\r\n    if (e.target && e.target.matches('[data-hide-modal]')) hideModal();\r\n  });\r\n\r\n  document.addEventListener('keydown', (e) => {\r\n    if (e.code === 'Escape' && modal.classList.contains('show')) hideModal();\r\n  });\r\n\r\n  window.addEventListener('scroll', showModalByScroll);\r\n\r\n  modalTimerId = setTimeout(showModal, 60000);\r\n\r\n  // CLASS\r\n  class MenuCard {\r\n    constructor({ src, alt, title, descr, price, parentSelector, classes = [] }) {\r\n      this.src = src;\r\n      this.alt = alt;\r\n      this.title = title;\r\n      this.descr = descr;\r\n      this.price = price;\r\n      this.parent = document.querySelector(parentSelector);\r\n      this.element = document.createElement('div');\r\n      this.classes = classes;\r\n      this.transfer = 95;\r\n\r\n      this.converToRUB();\r\n    }\r\n\r\n    converToRUB() {\r\n      this.price = this.price * this.transfer;\r\n    }\r\n\r\n    render() {\r\n      this.element.classList.add('menu__item');\r\n\r\n      this.classes.forEach((className) => this.element.classList.add(className));\r\n\r\n      this.element.innerHTML = `\r\n        <img src=\"${this.src}\" alt=\"${this.alt}\" />\r\n        <h3 class=\"menu__item-subtitle\">${this.title}</h3>\r\n        <div class=\"menu__item-descr\">${this.descr}</div>\r\n        <div class=\"menu__item-divider\"></div>\r\n        <div class=\"menu__item-price\">\r\n          <div class=\"menu__item-cost\">Цена:</div>\r\n          <div class=\"menu__item-total\"><span>${this.price}</span> руб/день</div>\r\n        </div>\r\n      `;\r\n\r\n      this.parent.append(this.element);\r\n    }\r\n  }\r\n\r\n  new MenuCard({\r\n    src: './images/tabs/vegy.jpg',\r\n    alt: 'vegy',\r\n    title: 'Меню “Фитнес“',\r\n    descr:\r\n      'Меню “Фитнес“ - это новый подход к приготовлению блюд: больше свежих овощей и фруктов. Продукт активных и здоровых людей. Это абсолютно новый продукт с оптимальной ценой и высоким качеством!',\r\n    price: 10,\r\n    parentSelector: '.menu__field .container',\r\n    classes: ['menu__item', 'first'],\r\n  }).render();\r\n\r\n  new MenuCard({\r\n    src: './images/tabs/elite.jpg',\r\n    alt: 'elite',\r\n    title: 'Меню “Премиум”',\r\n    descr:\r\n      'В меню “Премиум” мы используем не только красивый дизайн упаковки, но и качественное исполнение блюд. Красная рыба, морепродукты, фрукты - ресторанное меню без похода в ресторан!',\r\n    price: 25,\r\n    parentSelector: '.menu__field .container',\r\n    classes: ['second'],\r\n  }).render();\r\n\r\n  new MenuCard({\r\n    src: './images/tabs/post.jpg',\r\n    alt: 'post',\r\n    title: 'Меню “Постное“',\r\n    descr:\r\n      'Меню “Постное” - это тщательный подбор ингредиентов: полное отсутствие продуктов животного происхождения, молоко из миндаля, овса, кокоса или гречки, правильное количество белков за счет тофу и импортных вегетарианских стейков.',\r\n    price: 18,\r\n    parentSelector: '.menu__field .container',\r\n  }).render();\r\n\r\n  // FORM\r\n\r\n  const forms = document.querySelectorAll('form');\r\n\r\n  const messages = {\r\n    loading: './icons/spinner.svg',\r\n    succses: 'Спаибо! Скоро мы с вами свяжемся',\r\n    failure: 'Что-то пошло не так...',\r\n  };\r\n\r\n  function postData(form) {\r\n    form.addEventListener('submit', (e) => {\r\n      e.preventDefault();\r\n\r\n      const statusMessage = document.createElement('img');\r\n      const jsonData = {};\r\n      const formData = new FormData(form);\r\n      const request = new XMLHttpRequest();\r\n\r\n      statusMessage.src = messages.loading;\r\n      statusMessage.style.display = 'block';\r\n      statusMessage.style.margin = '10px auto -28px auto';\r\n\r\n      form.insertAdjacentElement('afterend', statusMessage);\r\n\r\n      request.open('POST', 'http://localhost:3000/server.php');\r\n      request.setRequestHeader('Content-type', 'application/json');\r\n\r\n      formData.forEach((value, key) => (jsonData[key] = value));\r\n\r\n      request.send(JSON.stringify(jsonData));\r\n\r\n      request.addEventListener('load', () => {\r\n        if (request.status === 200) {\r\n          console.log(request.response);\r\n          showThanksModal(messages.succses);\r\n          form.reset();\r\n          statusMessage.remove();\r\n        } else {\r\n          showThanksModal(messages.failure);\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  forms.forEach((form) => postData(form));\r\n});\r\n"]}